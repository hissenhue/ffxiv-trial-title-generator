<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF14討滅戦タイトル風画面ジェネレーター</title>
    
    <!-- OGP (Open Graph Protocol) メタタグ -->
    <meta property="og:title" content="FF14討滅戦タイトル風画面ジェネレーター">
    <meta property="og:description" content="Final Fantasy XIV風の討滅戦タイトル画面を簡単に作成できるツールです。カスタムテキストと背景画像で、あなただけのタイトル画面を生成しましょう。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:image" content="./ogp-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="FF14討滅戦タイトル風画面ジェネレーター">
    <meta property="og:locale" content="ja_JP">
    
    <!-- X (Twitter) Card メタタグ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FF14討滅戦タイトル風画面ジェネレーター">
    <meta name="twitter:description" content="Final Fantasy XIV風の討滅戦タイトル画面を簡単に作成できるツールです。カスタムテキストと背景画像で、あなただけのタイトル画面を生成しましょう。">
    <meta name="twitter:image" content="./ogp-image.jpg">
    <meta name="twitter:image:alt" content="FF14風タイトル画面のプレビュー">
    
    <!-- 一般的なメタタグ -->
    <meta name="description" content="Final Fantasy XIV風の討滅戦タイトル画面を簡単に作成できるツールです。カスタムテキストと背景画像で、あなただけのタイトル画面を生成しましょう。">
    <meta name="keywords" content="FF14, Final Fantasy XIV, タイトル画面, ジェネレーター, 討滅戦, SVG">
    <meta name="author" content="">

    <!-- Googleフォント -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700;900&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            color: #ffffff;
            font-family: 'Noto Serif JP', serif;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-family: 'Cinzel', serif;
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(to bottom, #FFD700, #FF8C00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .controls {
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #333;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #FFD700;
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #444;
            border-radius: 5px;
            color: #ffffff;
            font-size: 1.1em;
        }

        button {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background: linear-gradient(135deg, #FFD700, #FF8C00);
            color: #000;
            margin-right: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        }

        .preview-area {
            background: #1a1a2e;
            border-radius: 10px;
            padding: 40px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        svg {
            width: 100%;
            max-width: 1200px;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FF14討滅戦タイトル風画面ジェネレーター</h1>

        <div class="controls">
            <div class="input-group">
                <label for="textTop">サブタイトル（上部）:</label>
                <input id="textTop" type="text" value="FFXIV" placeholder="上部のテキスト">
            </div>

            <div class="input-group">
                <label for="textEn">英語メインタイトル:</label>
                <input id="textEn" type="text" value="Trial Title Generator">
            </div>

            <div class="input-group">
                <label for="textJp">日本語タイトル:</label>
                <input id="textJp" type="text" value="FF14討滅戦タイトル風画面ジェネレーター">
            </div>

            <div class="input-group">
                <label for="bgUpload">背景画像:</label>
                <input id="bgUpload" type="file" accept="image/*">
                <small style="color: #888; display: block; margin-top: 5px;">※画像をアップロードしない場合はデフォルト背景を使用</small>
            </div>

            <button onclick="generate()">タイトル画面を生成</button>
            <button onclick="saveImage()" style="background: linear-gradient(135deg, #4169E1, #1E90FF); color: #fff;">画像を保存</button>
        </div>

        <div class="preview-area" id="preview">
            <!-- SVGがここに生成される -->
        </div>
    </div>

    <script>
        let uploadedImageUrl = null;

        // 背景画像のアップロード処理
        document.getElementById('bgUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    uploadedImageUrl = event.target.result;
                    generate(); // 画像アップロード後に再生成
                };
                reader.readAsDataURL(file);
            }
        });

        function generate() {
            const textTop = document.getElementById("textTop").value;
            const textEn = document.getElementById("textEn").value;
            const textJp = document.getElementById("textJp").value;
            const preview = document.getElementById("preview");

            // 背景画像の処理
            const backgroundElement = uploadedImageUrl
                ? `<image href="${uploadedImageUrl}" x="0" y="0" width="1920" height="1080" preserveAspectRatio="xMidYMid slice"/>
                   <rect x="0" y="0" width="1920" height="1080" fill="rgba(0, 0, 0, 0.4)"/>`
                : `<image href="./back-image.jpg" x="0" y="0" width="1920" height="1080" preserveAspectRatio="xMidYMid slice"/>
                   <rect x="0" y="0" width="1920" height="1080" fill="rgba(0, 0, 0, 0.4)"/>`;

            const svgContent = `
                <svg viewBox="0 0 1920 1080" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <!-- ゴールドグラデーション -->
                        <linearGradient id="goldGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#FFEF94"/>
                            <stop offset="20%" stop-color="#FFD36B"/>
                            <stop offset="50%" stop-color="#D4AF37"/>
                            <stop offset="80%" stop-color="#B8860B"/>
                            <stop offset="100%" stop-color="#8B4513"/>
                        </linearGradient>

                        <!-- ベベル効果フィルター（英語用・強化版） -->
                        <filter id="bevel" x="-50%" y="-50%" width="200%" height="200%">
                            <!-- 外側のドロップシャドウ -->
                            <feGaussianBlur in="SourceAlpha" stdDeviation="5" result="outerBlur"/>
                            <feOffset in="outerBlur" dx="3" dy="6" result="outerShadow"/>
                            <feFlood flood-color="#000000" flood-opacity="0.7" result="shadowColor"/>
                            <feComposite in="shadowColor" in2="outerShadow" operator="in" result="finalShadow"/>

                            <!-- ベベル効果（メイン） -->
                            <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
                            <feSpecularLighting in="blur" surfaceScale="8" specularConstant="1.2"
                                specularExponent="25" lighting-color="white" result="specOut">
                                <fePointLight x="-80" y="-50" z="300"/>
                            </feSpecularLighting>
                            <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut2"/>

                            <!-- インナーシャドウ -->
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1.5" result="innerBlur"/>
                            <feOffset in="innerBlur" dx="1" dy="2" result="innerOffset"/>
                            <feFlood flood-color="#8B4513" flood-opacity="0.4" result="innerShadowColor"/>
                            <feComposite in="innerShadowColor" in2="innerOffset" operator="in" result="innerShadow"/>

                            <!-- 全て合成 -->
                            <feMerge>
                                <feMergeNode in="finalShadow"/>
                                <feMergeNode in="innerShadow"/>
                                <feMergeNode in="SourceGraphic"/>
                                <feMergeNode in="specOut2"/>
                            </feMerge>
                        </filter>

                        <!-- アウターグロー -->
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>

                    <!-- 背景 -->
                    ${backgroundElement}

                    <!-- 上部テキスト -->
                    <text x="960" y="400"
                        text-anchor="middle"
                        font-family="Cinzel, serif"
                        font-size="50"
                        font-weight="500"
                        fill="url(#goldGrad)"
                        filter="url(#bevel)"
                        stroke="#2c1a0f"
                        stroke-width="0.5"
                        opacity="0.9"
                        letter-spacing="8">
                        ${textTop}
                    </text>

                    <!-- 上部テキストの下線 -->
                    <rect x="660" y="428" width="600" height="3"
                        fill="url(#goldGrad)"
                        opacity="0.9"/>

                    <!-- 英語メインテキスト（縦長に変形） -->
                    <text x="960" y="550"
                        text-anchor="middle"
                        font-family="Cinzel, serif"
                        font-size="105"
                        font-weight="600"
                        fill="url(#goldGrad)"
                        filter="url(#bevel)"
                        stroke="#2c1a0f"
                        stroke-width="2"
                        transform="scale(1, 1.3)"
                        transform-origin="960 550">
                        ${textEn}
                    </text>

                    <!-- 日本語テキスト（黒い影） -->
                    <text x="962" y="702"
                        text-anchor="middle"
                        font-family="'Noto Serif JP', serif"
                        font-size="55"
                        font-weight="700"
                        letter-spacing="0.3em"
                        fill="rgba(0,0,0,0.8)">
                        ${textJp}
                    </text>

                    <!-- 日本語テキスト（縁取り） -->
                    <text x="960" y="700"
                        text-anchor="middle"
                        font-family="'Noto Serif JP', serif"
                        font-size="55"
                        font-weight="700"
                        letter-spacing="0.3em"
                        fill="#f8f4d0"
                        stroke="#2c1a0f"
                        stroke-width="6">
                        ${textJp}
                    </text>

                    <!-- 日本語テキスト（金色の光彩） -->
                    <text x="960" y="700"
                        text-anchor="middle"
                        font-family="'Noto Serif JP', serif"
                        font-size="55"
                        font-weight="700"
                        letter-spacing="0.3em"
                        fill="#f8f4d0"
                        filter="url(#glow)"
                        opacity="0.9">
                        ${textJp}
                    </text>

                    <!-- 装飾ライン上 -->
                    <line x1="360" y1="410" x2="1560" y2="410"
                        stroke="url(#goldGrad)"
                        stroke-width="2"
                        opacity="0.6"/>

                    <!-- 装飾ライン下 -->
                    <line x1="460" y1="800" x2="1460" y2="800"
                        stroke="url(#goldGrad)"
                        stroke-width="2"
                        opacity="0.6"/>
                </svg>
            `;

            preview.innerHTML = svgContent;
        }

        // 画像を保存する関数
        function saveImage() {
            const svgElement = document.querySelector('#preview svg');
            const svgString = new XMLSerializer().serializeToString(svgElement);
            const canvas = document.createElement('canvas');
            canvas.width = 1920;
            canvas.height = 1080;
            const ctx = canvas.getContext('2d');

            const img = new Image();
            const blob = new Blob([svgString], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);

            img.onload = function() {
                ctx.drawImage(img, 0, 0);
                URL.revokeObjectURL(url);

                canvas.toBlob(function(blob) {
                    const link = document.createElement('a');
                    link.download = 'ff14-title.png';
                    link.href = URL.createObjectURL(blob);
                    link.click();
                });
            };
            img.src = url;
        }

        // 初期表示
        window.addEventListener('load', function() {
            generate();
        });
    </script>
</body>
</html>
